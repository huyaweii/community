<!--index.wxml-->
<view class="container">
  <view class="banner">
    <image src="/static/images/banner.jpg" />
  </view>
  <view class="nav">
    <navigator url="/pages/collect/collect" hover-class="navigator-hover" class="wrapper">
      <view class='tradeWrap'>
        <i class='iconfont icon-jiaoyijilu'/>
      </view>
      <span class="tit">二手交易</span>
    </navigator>
    <navigator url="/pages/choose/choose" hover-class="navigator-hover" class="wrapper">
      <view class='tradeWrap rentWrap'>
        <i class='iconfont icon-fangwuzushou'/>
      </view>
      <span class="tit">房屋租售</span>
    </navigator>
    <navigator url="/pages/choose/choose" hover-class="navigator-hover" class="wrapper">
      <view class='tradeWrap jobWrap'>
        <i class='iconfont icon-zhaopin'/>
      </view>
      <span class="tit">求职招聘</span>
    </navigator>
  </view>
  <view class="list">
    <view class="block" wx:for="{{postList}}" wx:for-item="post" wx:key="id">
      <view class="info">
        <image src="{{post.user.avatar}}" class="avatar"/>
        <view class="detail">
          <span class="name">{{post.user.name}}</span>
          <span class="time">{{post.create_time}}</span>
        </view>
      </view>
      <view class="post">
        <view class="content"><span class='tag'>#{{post.categoryName}}# </span>{{post.content}}</view>
        <view class='replyDetail' wx:for="{{post.replys}}" wx:for-item="reply" wx:key="id" hover-class='activeReply' bindtap="changePostId" data-post-id="{{post.id}}" data-at-user-id="{{reply.user.id}}" data-comment-placeholder="{{'回复' + reply.user.name}}">
          <span class='user'>{{reply.user.name}} </span><span wx:if="{{reply.at_user_id}}"><span class='response'>回复了</span><span class='atUser'> {{reply.at_user.name}} </span></span>
          <span class='replyContent'>{{reply.content}} </span>
        </view>
        <view class="reply">
          <input bindinput="bindKeyInput" placeholder="请输入评论内容" bindfocus="changePostId" data-post-id="{{post.id}}" data-at-user-id="{{null}}" type='text' data-comment-placeholder="请输入评论内容"/>
        </view>
      </view>
    </view>
  </view>
  <view class='pullUpLoading' wx:if="{{pullUpLoading}}">
    加载中...
  </view>
  <view class='mask' wx:if="{{willReplyPostId}}" bindtap="closeMask">
    <view class='commentContainer'>
      <input type='text' class='commentInput' catchtap placeholder="{{commentPlaceholder}}" focus confirm-type="send" bindconfirm='submitComment'/>
    </view>
  </view>
  <navigator url="/pages/collect/collect?type=community" hover-class="navigator-hover" class="wrapper">
    <view class="add">+</view>
  </navigator>
</view>
